{"ast":null,"code":"import _asyncToGenerator from \"/Users/francaroalbarran/Desktop/workspace/bmlapalma/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { validateLimitRateParams } from '../validateLimitRateParams/validateLimitRateParams';\nconst getLeftTime = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator(function* (id, throttle, storage) {\n    const lastTime = Number((yield storage.get(id)) || 0);\n    return throttle - Date.now() + lastTime;\n  });\n  return function getLeftTime(_x, _x2, _x3) {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport const isLimitRateHit = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator(function* (defaultID, options, storage) {\n    if (!options.throttle || !storage) {\n      return false;\n    }\n    validateLimitRateParams(options.throttle, options.id);\n    const id = options.id || defaultID;\n    const leftTime = yield getLeftTime(id, options.throttle, storage);\n    if (leftTime > 0) {\n      return true;\n    }\n    yield storage.set(id, Date.now().toString());\n    return false;\n  });\n  return function isLimitRateHit(_x4, _x5, _x6) {\n    return _ref2.apply(this, arguments);\n  };\n}();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}